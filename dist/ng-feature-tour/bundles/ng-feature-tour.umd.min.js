!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/cdk/a11y"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("ng-feature-tour",["exports","@angular/core","@angular/common","@angular/cdk/a11y","@angular/platform-browser"],e):e((t=t||self)["ng-feature-tour"]={},t.ng.core,t.ng.common,t.ng.cdk.a11y,t.ng.platformBrowser)}(this,(function(t,e,n,o,i){"use strict";var r;(r=t.EventEnum||(t.EventEnum={})).Start="START",r.Next="NEXT",r.Previous="PREVIOUS",r.Abort="ABORT",r.Finish="FINISH",r.Escape="ESCAPE";var p=function(){this.onChange=new e.EventEmitter,this.initialize=new e.EventEmitter};p.ɵfac=function(t){return new(t||p)},p.ɵprov=e.ɵɵdefineInjectable({token:p,factory:p.ɵfac,providedIn:"root"});var s=function(){function t(){}return t.prototype.transform=function(t,e){return void 0===e&&(e="ft-step"),e+"-"+t.target},t}();s.ɵfac=function(t){return new(t||s)},s.ɵpipe=e.ɵɵdefinePipe({name:"identify",type:s,pure:!0});var a=function(){function t(){}return t.prototype.transform=function(t){return t.title+". "+t.description+"."},t}();a.ɵfac=function(t){return new(t||a)},a.ɵpipe=e.ɵɵdefinePipe({name:"ariaDescription",type:a,pure:!0});var l=function(){function t(){}return t.prototype.transform=function(t,e,n){return n+=1,t.replace("{total}",e.toString()).replace("{index}",n.toString())},t}();function u(t,n){if(1&t&&e.ɵɵelement(0,"span",15),2&t){var o=n.$implicit;e.ɵɵclassProp("is-current",o.enabled)}}function c(t,n){if(1&t){var o=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"button",16),e.ɵɵlistener("click",(function(){e.ɵɵrestoreView(o);var t=e.ɵɵnextContext().$implicit;return e.ɵɵnextContext(2).abort(t)})),e.ɵɵelementEnd()}if(2&t){var i=e.ɵɵnextContext(3);e.ɵɵproperty("innerHTML",i.setup.controls.abort,e.ɵɵsanitizeHtml)}}function d(t,n){if(1&t){var o=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"button",16),e.ɵɵlistener("click",(function(){e.ɵɵrestoreView(o);var t=e.ɵɵnextContext(),n=t.$implicit,i=t.index;return e.ɵɵnextContext(2).previous(n,i)})),e.ɵɵelementEnd()}if(2&t){var i=e.ɵɵnextContext(3);e.ɵɵproperty("innerHTML",i.setup.controls.previous,e.ɵɵsanitizeHtml)}}function f(t,n){if(1&t){var o=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"button",16),e.ɵɵlistener("click",(function(){e.ɵɵrestoreView(o);var t=e.ɵɵnextContext(),n=t.$implicit,i=t.index;return e.ɵɵnextContext(2).next(n,i)})),e.ɵɵelementEnd()}if(2&t){var i=e.ɵɵnextContext(3);e.ɵɵproperty("innerHTML",i.setup.controls.next,e.ɵɵsanitizeHtml)}}function g(t,n){if(1&t){var o=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"button",16),e.ɵɵlistener("click",(function(){e.ɵɵrestoreView(o);var t=e.ɵɵnextContext().$implicit;return e.ɵɵnextContext(2).finish(t)})),e.ɵɵelementEnd()}if(2&t){var i=e.ɵɵnextContext(3);e.ɵɵproperty("innerHTML",i.setup.controls.done,e.ɵɵsanitizeHtml)}}function b(t,n){if(1&t){var o=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"div",3),e.ɵɵelementStart(1,"div",4),e.ɵɵlistener("click",(function(){return e.ɵɵrestoreView(o),e.ɵɵnextContext(2).onEscapeHandler()})),e.ɵɵelementEnd(),e.ɵɵelement(2,"div",5),e.ɵɵelementStart(3,"div",6),e.ɵɵpipe(4,"identify"),e.ɵɵpipe(5,"ariaDescription"),e.ɵɵpipe(6,"ariaLabel"),e.ɵɵelementStart(7,"h2",7),e.ɵɵtext(8),e.ɵɵelementEnd(),e.ɵɵelementStart(9,"div",8),e.ɵɵtext(10),e.ɵɵelementEnd(),e.ɵɵelementStart(11,"div",9),e.ɵɵtemplate(12,u,1,2,"span",10),e.ɵɵelementEnd(),e.ɵɵelementStart(13,"div",11),e.ɵɵelementStart(14,"div",12),e.ɵɵtemplate(15,c,1,1,"button",13),e.ɵɵelementEnd(),e.ɵɵelementStart(16,"div",14),e.ɵɵtemplate(17,d,1,1,"button",13),e.ɵɵtemplate(18,f,1,1,"button",13),e.ɵɵtemplate(19,g,1,1,"button",13),e.ɵɵelementEnd(),e.ɵɵelementEnd(),e.ɵɵelementEnd(),e.ɵɵelementEnd()}if(2&t){var i=n.$implicit,r=n.index,p=e.ɵɵnextContext(2);e.ɵɵproperty("hidden",!i.enabled),e.ɵɵadvance(2),e.ɵɵstyleProp("left",null==i.bounds?null:i.bounds.lens.left,"px")("top",null==i.bounds?null:i.bounds.lens.top,"px")("width",null==i.bounds?null:i.bounds.lens.width,"px")("height",null==i.bounds?null:i.bounds.lens.height,"px"),e.ɵɵadvance(1),e.ɵɵclassMapInterpolate1("ft-step ",null==i.bounds?null:i.bounds.modifiers,""),e.ɵɵstyleProp("left",null==i.bounds?null:i.bounds.left,"px")("top",null==i.bounds?null:i.bounds.top,"px")("visibility",i.visible?"visible":"hidden"),e.ɵɵproperty("id",e.ɵɵpipeBind1(4,28,i)),e.ɵɵattribute("aria-roledescription",e.ɵɵpipeBind1(5,30,i))("aria-label",e.ɵɵpipeBind3(6,32,p.setup.a11ty.roleDescription,p.steps.length,r)),e.ɵɵadvance(5),e.ɵɵtextInterpolate(i.title),e.ɵɵadvance(2),e.ɵɵtextInterpolate(i.description),e.ɵɵadvance(2),e.ɵɵproperty("ngForOf",p.steps),e.ɵɵadvance(3),e.ɵɵproperty("ngIf",!p.isLastStep(r)),e.ɵɵadvance(2),e.ɵɵproperty("ngIf",!p.isFirstStep(r)),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",!p.isLastStep(r)),e.ɵɵadvance(1),e.ɵɵproperty("ngIf",p.isLastStep(r))}}function m(t,n){if(1&t&&(e.ɵɵelementStart(0,"div",1),e.ɵɵtemplate(1,b,20,36,"div",2),e.ɵɵelementEnd()),2&t){var o=e.ɵɵnextContext();e.ɵɵadvance(1),e.ɵɵproperty("ngForOf",o.steps)}}l.ɵfac=function(t){return new(t||l)},l.ɵpipe=e.ɵɵdefinePipe({name:"ariaLabel",type:l,pure:!0});var h=function(){function e(t){this.featureTourService=t}return e.prototype.disableStep=function(t){t.enabled=!1,t.visible=!1},e.prototype.disableTour=function(t,e){this.enabled=!1,this.emitChangeEvent(t,e)},e.prototype.scrollToTop=function(t){window.scrollTo(0,document.getElementById(t.target).offsetTop-16)},e.prototype.emitChangeEvent=function(t,e){this.featureTourService.onChange.emit({event:e,step:t})},e.prototype.getBounds=function(t,e){var n,o,i=t.getBoundingClientRect(),r=e.getBoundingClientRect(),p=[];return r.y>screen.availHeight-(r.y+r.height)?(p.push("to-top"),o=r.y-i.height-32):(p.push("to-bottom"),o=r.y+r.height+32),r.x>screen.availWidth/2?(p.push("to-right"),n=r.x+r.width-i.width):(p.push("to-left"),n=r.x),{left:n,top:o,modifiers:p.join(" "),lens:{left:r.left,top:r.top,width:r.width,height:r.height}}},e.prototype.applyBounds=function(t){var e="ft-step-"+t.target,n=document.getElementById(t.target),o=document.getElementById(e);t.bounds=this.getBounds(o,n)},e.prototype.captureFocus=function(t){var e="ft-step-"+t.target,n=document.querySelectorAll("#"+e+" [tabindex]").item(0);setTimeout((function(){n.focus()}),1)},e.prototype.enableStep=function(t){var e=this;this.scrollToTop(t),this.enabled=!0,t.enabled=!0,setTimeout((function(){t.visible=!0,e.applyBounds(t),e.captureFocus(t)}),1)},e.prototype.ngOnInit=function(){var t=this;if(!this.steps||0===this.steps.length)throw"NgFeatureTourComponent: no steps provided";this.featureTourService.initialize.subscribe((function(e){var n=t.steps.filter((function(t){return t.target===e.initialStep})).shift();if(!n)throw'NgFeatureTourComponent: target "'+e.initialStep+'" not found';t.setup=e,t.enableStep(n)}))},e.prototype.onEscapeHandler=function(e){if(this.steps){var n=this.steps.filter((function(t){return t.enabled})).shift();n&&(this.close(n),this.emitChangeEvent(n,t.EventEnum.Escape))}},e.prototype.close=function(t){t.enabled=!1,t.visible=!1,this.enabled=!1},e.prototype.isLastStep=function(t){return t===this.steps.length-1},e.prototype.isFirstStep=function(t){return 0===t},e.prototype.getAriasIdentifiers=function(t){return"ft-title-"+t+" ft-description-"+t},e.prototype.previous=function(e,n){var o=this.steps[n-1];this.disableStep(e),this.enableStep(o),this.emitChangeEvent(o,t.EventEnum.Previous)},e.prototype.next=function(e,n){var o=this.steps[n+1];this.disableStep(e),this.enableStep(o),this.emitChangeEvent(o,t.EventEnum.Next)},e.prototype.finish=function(e){this.disableStep(e),this.disableTour(e,t.EventEnum.Finish)},e.prototype.abort=function(e){this.disableStep(e),this.disableTour(e,t.EventEnum.Abort)},e}();h.ɵfac=function(t){return new(t||h)(e.ɵɵdirectiveInject(p))},h.ɵcmp=e.ɵɵdefineComponent({type:h,selectors:[["ng-feature-tour"]],hostBindings:function(t,n){1&t&&e.ɵɵlistener("keydown.escape",(function(t){return n.onEscapeHandler(t)}),!1,e.ɵɵresolveDocument)},inputs:{steps:"steps"},decls:1,vars:1,consts:[["class","ft-wrapper","cdkTrapFocus","",4,"ngIf"],["cdkTrapFocus","",1,"ft-wrapper"],[3,"hidden",4,"ngFor","ngForOf"],[3,"hidden"],[1,"ft-scape-handler",3,"click"],[1,"ft-lens"],["aria-modal","true","role","dialog",3,"id"],[1,"ft-step-title"],[1,"ft-step-description"],[1,"ft-step-bullet-list"],["class","ft-step-bullet",3,"is-current",4,"ngFor","ngForOf"],[1,"ft-step-controls"],[1,"ft-step-abort"],["type","button","tabindex","0",3,"innerHTML","click",4,"ngIf"],[1,"ft-step-navigation"],[1,"ft-step-bullet"],["type","button","tabindex","0",3,"innerHTML","click"]],template:function(t,n){1&t&&e.ɵɵtemplate(0,m,2,1,"div",0),2&t&&e.ɵɵproperty("ngIf",n.enabled)},directives:[n.NgIf,o.CdkTrapFocus,n.NgForOf],pipes:[s,a,l],styles:['.ft-scape-handler[_ngcontent-%COMP%]{background-color:initial;height:100vh;left:0;position:fixed;top:0;width:100%;z-index:9900}.ft-step[_ngcontent-%COMP%]{background-color:#fff;border-radius:4px;color:#444;max-width:320px;min-width:320px;padding:16px;position:fixed;transition:left .3s linear,top .3s linear,width .3s linear;z-index:9999}.ft-step[_ngcontent-%COMP%]:before{border-color:#fff transparent;border-style:solid;border-width:16px;content:"";height:0;position:absolute;width:0}.ft-step.to-top[_ngcontent-%COMP%]:before{border-bottom-color:transparent;bottom:-31px}.ft-step.to-bottom[_ngcontent-%COMP%]:before{border-top-color:transparent;top:-31px}.ft-step.to-left[_ngcontent-%COMP%]:before{left:16px}.ft-step.to-right[_ngcontent-%COMP%]:before{right:16px}.ft-step-bullet.is-current[_ngcontent-%COMP%]{background-color:#2980b9}.ft-step-title[_ngcontent-%COMP%]{font-size:18px;margin:0 0 16px}.ft-step-description[_ngcontent-%COMP%]{font-size:16px;line-height:1.4;margin:0 0 16px}.ft-step-bullet-list[_ngcontent-%COMP%]{align-items:center;display:flex;margin:0 0 16px}.ft-step-bullet[_ngcontent-%COMP%]{background-color:#bdc3c7;border-radius:50%;display:block;height:10px;margin-right:10px;width:10px}.ft-lens[_ngcontent-%COMP%]{box-shadow:0 0 0 1000em rgba(0,0,0,.75);position:fixed;transition:left .3s linear,top .3s linear,width .3s linear,height .3s linear;z-index:9990}.ft-step-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.ft-step-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{-moz-appearance:none;-webkit-appearance:none;appearance:none;background-color:#fff;border:2px solid #2980b9;border-radius:4px;color:#2980b9;font-size:14px;font-weight:700;padding:8px 12px}.ft-step-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.ft-step-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#2980b9;color:#fff;margin-left:16px}']});var v=function(){};v.ɵmod=e.ɵɵdefineNgModule({type:v}),v.ɵinj=e.ɵɵdefineInjector({factory:function(t){return new(t||v)},imports:[[i.BrowserModule,o.A11yModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&e.ɵɵsetNgModuleScope(v,{declarations:[h,a,l,s],imports:[i.BrowserModule,o.A11yModule],exports:[h]}),t.FeatureTourService=p,t.NgFeatureTourComponent=h,t.NgFeatureTourModule=v,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-feature-tour.umd.min.js.map